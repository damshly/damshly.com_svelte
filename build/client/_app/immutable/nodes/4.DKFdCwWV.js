import"../chunks/DsnmJJEf.js";import{a3 as je,b as Ze,aM as $e,e as et,b0 as tt,_ as at,$ as H,a5 as L,aK as X,a0 as J,a1 as b,a2 as rt,g as r,a6 as D,b1 as st,a4 as ot,a8 as P,b2 as _,b3 as se,aJ as _e,au as ge}from"../chunks/DT1BJyTm.js";import{c as nt,s as Y}from"../chunks/BCxILywt.js";import{i as I}from"../chunks/D2tprn_w.js";import{e as oe,i as it}from"../chunks/Bquz_zD-.js";import{h as ct}from"../chunks/CAfBw3Sb.js";import{s as de,a as Z,r as lt,b as we,c as dt}from"../chunks/DpOaNMpx.js";import{o as ut,d as vt,e as ft}from"../chunks/CtV13-Of.js";import{p as mt}from"../chunks/BJ9kv18j.js";import{i as yt,a as pt,b as bt,c as ht}from"../chunks/BG20cPq2.js";import{r as xt}from"../chunks/DnecEayl.js";function ke(t,a,d){je(()=>{var u=Ze(()=>a(t,d?.())||{});if(d&&u?.update){var o=!1,f={};$e(()=>{var i=d();et(i),o&&tt(f,i)&&(f=i,u.update(i))}),o=!0}if(u?.destroy)return()=>u.destroy()})}function _t(t){const a=JSON.parse(t);return a.data&&(a.data=bt(a.data,ht.decoders)),a}function ue(t){return HTMLElement.prototype.cloneNode.call(t)}function gt(t,a=()=>{}){const d=async({action:o,result:f,reset:i=!0,invalidateAll:y=!0})=>{f.type==="success"&&(i&&HTMLFormElement.prototype.reset.call(t),y&&await yt()),(location.origin+location.pathname===o.origin+o.pathname||f.type==="redirect"||f.type==="error")&&await pt(f)};async function u(o){if((o.submitter?.hasAttribute("formmethod")?o.submitter.formMethod:ue(t).method)!=="post")return;o.preventDefault();const i=new URL(o.submitter?.hasAttribute("formaction")?o.submitter.formAction:ue(t).action),y=o.submitter?.hasAttribute("formenctype")?o.submitter.formEnctype:ue(t).enctype,w=new FormData(t,o.submitter),N=new AbortController;let O=!1;const T=await a({action:i,cancel:()=>O=!0,controller:N,formData:w,formElement:t,submitter:o.submitter})??d;if(O)return;let g;try{const p=new Headers({accept:"application/json","x-sveltekit-action":"true"});y!=="multipart/form-data"&&p.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(y)?y:"application/x-www-form-urlencoded");const q=y==="multipart/form-data"?w:new URLSearchParams(w),C=await fetch(i,{method:"POST",headers:p,cache:"no-store",body:q,signal:N.signal});g=_t(await C.text()),g.type==="error"&&(g.status=C.status)}catch(p){if(p?.name==="AbortError")return;g={type:"error",error:p}}await T({action:i,formData:w,formElement:t,update:p=>d({action:i,result:g,reset:p?.reset,invalidateAll:p?.invalidateAll}),result:g})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",u),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",u)}}}var Ae="mz3PUW_p",Pe=["#FFC700","#FF0000","#2E3191","#41BBC7"],ze=3500,Se=.5,Ee=150,Me="mix",We=12,Le="",Ue=!0,He=800,Te=1600;function wt(t,a={}){let{colors:d=Pe,duration:u=ze,force:o=Se,particleCount:f=Ee,particleShape:i=Me,particleSize:y=We,particleClass:w=Le,destroyAfterDone:N=Ue,stageHeight:O=He,stageWidth:j=Te}=a;(function(l){if(document.querySelector("style[data-neoconfetti]"))return;const m=ve("style");m.dataset.neoconfetti="",m.textContent=l,fe(document.head,m)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",O+"px");let T=[],g=[];const p=()=>$(U()*(St-1)),q=(l,m)=>i!=="rectangles"&&(l==="circles"||Et(m));function C(l,m){const S=p(),E=q(i,S),n=(c,h)=>l.style.setProperty(c,h+"");n("--xlp",me(ne(Ne(m,90)-180),0,180,-j/2,j/2)+"px"),n("--dc",u-$(1e3*U())+"ms");const e=U()<At?Q(U()*Pt,2):0;n("--x1",e),n("--x2",-1*e),n("--x3",e),n("--x4",Q(ne(me(ne(Ne(m,90)-180),0,180,-1,1)),4)),n("--y1",Q(U()*Fe,4)),n("--y2",Q(U()*o*(qe()?1:-1),4)),n("--y3",Fe),n("--y4",Q(zt(me(ne(m-180),0,180,o,-o),0),4)),n("--w",(E?y:$(4*U())+y/2)+"px"),n("--h",(E?y:$(2*U())+y)+"px");const s=S.toString(2).padStart(3,"0").split("");n("--hr",s.map((c=>+c/2+"")).join(" ")),n("--r",s.join(" ")),n("--rd",Q(U()*(kt-Ce)+Ce)+"ms"),n("--br",E?"50%":0)}let G;function V(){t.innerHTML="",clearTimeout(G),T=De(f,d),g=(function(l,m=[],S){const E=[];for(const{color:n}of m){const e=ve("div");e.className=`${Ae} ${S}`,e.style.setProperty("--bgc",n);const s=ve("div");fe(e,s),fe(l,e),E.push(e)}return E})(t,T,w);for(const[l,m]of Oe(g))C(m,T[+l].degree);G=setTimeout((()=>{N&&(t.innerHTML="")}),u)}return V(),{update(l){const m=l.particleCount??Ee,S=l.particleShape??Me,E=l.particleSize??We,n=l.particleClass??Le,e=l.colors??Pe,s=l.stageHeight??He,c=l.duration??ze,h=l.force??Se,k=l.stageWidth??Te,x=l.destroyAfterDone??Ue;T=De(m,e);let v=!1;if(m===f){g=Array.from(t.querySelectorAll(`.${Ae}`));for(const[M,{color:z}]of Oe(T)){const W=g[+M];JSON.stringify(d)!==JSON.stringify(e)&&W.style.setProperty("--bgc",z),S!==i&&W.style.setProperty("--br",q(S,p())?"50%":"0"),n!==w&&(w&&W.classList.remove(w),n&&W.classList.add(n))}}else v=!0;N&&!x&&clearTimeout(G),t.style.setProperty("--sh",s+"px"),u=c,d=e,o=h,f=m,i=S,y=E,w=n,N=x,O=s,j=k,v&&V()},destroy(){t.innerHTML="",clearTimeout(G)}}}var Ce=200,kt=800,At=.1,Pt=.3,Fe=.5,ne=Math.abs,U=Math.random,$=Math.round,zt=Math.max,ve=t=>document.createElement(t),fe=(t,a)=>t.appendChild(a),De=(t,a)=>Array.from({length:t},((d,u)=>({color:a[u%a.length],degree:360*u/t}))),Q=(t,a=2)=>$((t+Number.EPSILON)*10**a)/10**a,me=(t,a,d,u,o)=>(t-a)*(o-u)/(d-a)+u,Ne=(t,a)=>t+a>360?t+a-360:t+a,qe=()=>U()>.5,Oe=Object.entries,St=6,Et=t=>t!==1&&qe();class Mt{#e;#t;constructor(a,d){this.#e=a,this.#t=nt(d)}get current(){return this.#t(),this.#e()}}const Wt=/\(.+\)/,Lt=new Set(["all","print","screen","and","or","not","only"]);class Ut extends Mt{constructor(a,d){let u=Wt.test(a)||a.split(/[\s,]+/).some(f=>Lt.has(f.trim()))?a:`(${a})`;const o=window.matchMedia(u);super(()=>o.matches,f=>ut(o,"change",f))}}var Ht=H('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-115oxdy"/>'),Tt=H('<div> <span class="visually-hidden svelte-115oxdy"><!></span> <input name="guess" type="hidden" class="svelte-115oxdy"/></div>'),Ct=H('<h2 class="visually-hidden svelte-115oxdy"> </h2> <div></div>',1),Ft=H('<p class="svelte-115oxdy"> </p>'),Dt=H('<!> <button data-key="enter" class="restart selected svelte-115oxdy" formaction="?/restart"> </button>',1),Nt=H('<button formaction="?/update" name="key"> </button>'),Ot=H('<div class="row svelte-115oxdy"></div>'),jt=H('<div class="keyboard svelte-115oxdy"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-115oxdy">back</button> <!></div>'),qt=H('<div style="position: absolute; left: 50%; top: 30%" class="svelte-115oxdy"></div>'),Gt=H('<h1 class="visually-hidden svelte-115oxdy">Sverdle</h1> <form method="post" action="?/enter" class="svelte-115oxdy"><a class="how-to-play svelte-115oxdy">How to play</a> <div></div> <div class="controls svelte-115oxdy"><!></div></form> <!>',1);function ea(t,a){at(a,!0);let d=mt(a,"form",15);const u=new Ut("(prefers-reduced-motion: reduce)");let o=_(()=>a.data.answers.at(-1)==="xxxxx"),f=_(()=>r(o)?-1:a.data.answers.length),i=_(()=>a.data.guesses[r(f)]||""),y=_(()=>r(i).length===5);const w=_(()=>{let e={},s={};return a.data.answers.forEach((c,h)=>{const k=a.data.guesses[h];for(let x=0;x<5;x+=1){const v=k[x];c[x]==="x"?(e[v]="exact",s[v]="correct"):e[v]||(e[v]=c[x]==="c"?"close":"missing",s[v]=c[x]==="c"?"present":"absent")}}),{classnames:e,description:s}}),N=_(()=>r(w).classnames),O=_(()=>r(w).description);function j(e){e.preventDefault();const s=e.target.getAttribute("data-key");s==="backspace"?(ge(i,r(i).slice(0,-1)),d()?.badGuess&&d(d().badGuess=!1,!0)):r(i).length<5&&ge(i,r(i)+s)}function T(e){e.metaKey||e.key==="Enter"&&!r(y)||document.querySelector(`[data-key="${e.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var g=Gt();ft("keydown",st,T),ct("115oxdy",e=>{var s=Ht();je(()=>{ot.title="Sverdle"}),b(e,s)});var p=L(X(g),2),q=D(p),C=L(q,2);let G;oe(C,20,()=>Array.from(Array(6).keys()),e=>e,(e,s)=>{const c=_(()=>s===r(f));var h=Ct(),k=X(h),x=D(k);P(k);var v=L(k,2);let M;oe(v,20,()=>Array.from(Array(5).keys()),z=>z,(z,W)=>{const F=_(()=>r(c)?r(i):a.data.guesses[s]),A=_(()=>a.data.answers[s]?.[W]),ee=_(()=>r(F)?.[W]??""),Ge=_(()=>r(c)&&W===r(F).length),ye=_(()=>r(A)==="x"),pe=_(()=>r(A)==="c"),be=_(()=>r(A)==="_");var te=Tt();let he;var xe=D(te),ie=L(xe),Je=D(ie);{var Ke=K=>{var ae=se("(correct)");b(K,ae)},Re=K=>{var ae=_e(),Be=X(ae);{var Ie=R=>{var re=se("(present)");b(R,re)},Qe=R=>{var re=_e(),Ve=X(re);{var Xe=B=>{var le=se("(absent)");b(B,le)},Ye=B=>{var le=se("empty");b(B,le)};I(Ve,B=>{r(be)?B(Xe):B(Ye,!1)},!0)}b(R,re)};I(Be,R=>{r(pe)?R(Ie):R(Qe,!1)},!0)}b(K,ae)};I(Je,K=>{r(ye)?K(Ke):K(Re,!1)})}P(ie);var ce=L(ie,2);lt(ce),P(te),J(()=>{he=Z(te,1,"letter svelte-115oxdy",null,he,{exact:r(ye),close:r(pe),missing:r(be),selected:r(Ge)}),Y(xe,`${r(ee)??""} `),ce.disabled=!r(c),we(ce,r(ee))}),b(z,te)}),P(v),J(()=>{Y(x,`Row ${s+1}`),M=Z(v,1,"row svelte-115oxdy",null,M,{current:r(c)})}),b(e,h)}),P(C);var V=L(C,2),l=D(V);{var m=e=>{var s=Dt(),c=X(s);{var h=v=>{var M=Ft(),z=D(M);P(M),J(()=>Y(z,`the answer was "${a.data.answer??""}"`)),b(v,M)};I(c,v=>{!r(o)&&a.data.answer&&v(h)})}var k=L(c,2),x=D(k);P(k),J(()=>Y(x,`${r(o)?"you won :)":"game over :("} play again?`)),b(e,s)},S=e=>{var s=jt(),c=D(s);let h;var k=L(c,2);k.__click=j;var x=L(k,2);oe(x,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],v=>v,(v,M)=>{var z=Ot();oe(z,21,()=>M,it,(W,F)=>{var A=Nt();A.__click=j;var ee=D(A,!0);P(A),J(()=>{de(A,"data-key",r(F)),Z(A,1,dt(r(N)[r(F)]),"svelte-115oxdy"),A.disabled=r(y),we(A,r(F)),de(A,"aria-label",`${r(F)??""} ${(r(O)[r(F)]||"")??""}`),Y(ee,r(F))}),b(W,A)}),P(z),b(v,z)}),P(s),J(()=>{c.disabled=!r(y),h=Z(c,1,"svelte-115oxdy",null,h,{selected:r(y)})}),b(e,s)};I(l,e=>{r(o)||a.data.answers.length>=6?e(m):e(S,!1)})}P(V),P(p),ke(p,(e,s)=>gt?.(e,s),()=>()=>({update:e})=>{e({reset:!1})});var E=L(p,2);{var n=e=>{var s=qt();ke(s,(c,h)=>wt?.(c,h),()=>({particleCount:u.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),b(e,s)};I(E,e=>{r(o)&&e(n)})}J(e=>{de(q,"href",e),G=Z(C,1,"grid svelte-115oxdy",null,G,{playing:!r(o),"bad-guess":d()?.badGuess})},[()=>xt("/sverdle/how-to-play")]),b(t,g),rt()}vt(["click"]);export{ea as component};
